var xjs=function(){"use strict";class e{constructor(e={}){this.shouldCallListener=e.shouldCallListener?e.shouldCallListener.bind(this):(e,t)=>"*"===e.type||e.type===t.type,this.toHandlerPayload=e.toHandlerPayload?e.toHandlerPayload.bind(this):(e,t)=>t,this.listeners=[]}addEventListener(e,t){if(Array.isArray(t))return t.map((t=>this.addEventListener(e,t)));if("function"!=typeof t)return;const s=Math.random().toString(36).slice(2);return this.listeners.push({type:e,handler:t,id:s}),{remove:()=>{for(let e=this.listeners.length-1;e>=0;e--)this.listeners[e].id===s&&this.listeners.splice(e,1)}}}removeEventListener(e,t){if(Array.isArray(t))return t.map((t=>this.removeEventListener(e,t)));for(let s=this.listeners.length-1;s>=0;s--){let r=this.listeners[s];r.type!==e||t&&r.handler!==t||this.listeners.splice(s,1)}}dispatchEvent(e,t){const s={...t,type:e};for(let e=0,t=this.listeners.length;e<t;e++){let t=this.listeners[e];this.shouldCallListener(t,s)&&t.handler(this.toHandlerPayload(t,s))}}}class t{constructor(e,s,r=!1){"string"==typeof e?(this.host=document,this.selector=e):e instanceof t?(this.host=e.host,this.selector=e.selector+" "+(s||"")):(this.host=e||document,this.selector=s),this.selector=String(this.selector||"").trim(),this.all=r,this.listeners=[]}proxySelector(e){return new t(this,e)}proxySelectorAll(e){return new t(this,e,!0)}addEventListener(e,t,s=!1){let{host:r,selector:i,all:n,listeners:a}=this,o=e=>{if(i)if(n){for(let s=e.target;s;s=s.parentNode)if("function"==typeof s.matches&&s.matches(i)){t.call(s,e);break}}else{let s=r.querySelector(i);for(let r=e.target;s&&r;r=r.parentNode)if(r===s){t.call(r,e);break}}else t.call(r,e)};r.addEventListener(e,o,s),a.push({type:e,handler:t,useCapture:s,proxyHandler:o})}removeEventListener(e,t,s=!1){let{host:r,listeners:i}=this;for(let n=i.length-1;n>=0;n--){let a=i[n];a.type===e&&a.handler===t&&a.useCapture===s&&(r.removeEventListener(e,a.proxyHandler,s),i.splice(n,1))}}getHost(){return this.host}query(){let{host:e,selector:t,all:s}=this;if(e)return t?s?e.querySelectorAll(t):e.querySelector(t):e}}var s=(e,s)=>new t(s,e,!1),r=(e,s)=>new t(s,e,!0),i=e=>{try{let t;t=null==e?new URL(window.location.href):void 0!==e.href?new URL(e.href):new URL(e,window.location.origin);let{pathname:s,search:r,hash:i}=t;return s+r+i}catch(e){}},n=e=>{if(!e||void 0===e.href)return!1;try{return new URL(e.href).origin===window.location.origin}catch(e){}},a=e=>Array.isArray(e)||e instanceof NodeList||e instanceof HTMLCollection,o="ROUTE_CHANGE";var c=new class{constructor(){this.eventManager=new e,this.subscriptions=[],window.addEventListener("popstate",(()=>this.dispatchRoute()))}dispatchRoute(e){this.eventManager.dispatchEvent(o,{path:void 0===e?i():e})}subscribe(e){let t;if(e){if(a(e))for(let t of e)this.subscribe(t);else"string"==typeof e?document.addEventListener("click",t=t=>{for(let s=t.target;s;s=s.parentNode)s.matches&&s.matches(e)&&n(s)&&(t.preventDefault(),this.assign(i(s)))}):e instanceof HTMLElement?e.addEventListener("click",t=t=>{n(e)&&(t.preventDefault(),this.assign(i(e)))}):e.dispatchRoute&&this.eventManager.addEventListener(o,t=t=>{e.dispatchRoute(t.path)});t&&this.subscriptions.push({target:e,handler:t})}}unsubscribe(e){if(e)if(a(e))for(let t of e)this.unsubscribe(t);else for(let t=this.subscriptions.length-1;t>=0;t--){let{target:s,handler:r}=this.subscriptions[t];s===e&&("string"==typeof s?document.removeEventListener("click",r):s instanceof HTMLElement?s.removeEventListener("click",r):s.dispatchRoute&&this.eventManager.removeEventListener(o,r),this.subscriptions.splice(t,1))}}assign(e){history.pushState({},"",e),this.dispatchRoute()}replace(e){history.replaceState({},"",e),this.dispatchRoute()}reload(){this.dispatchRoute()}toString(){return i()}go(e){history.go(e)}back(){this.go(-1)}forward(){this.go(1)}};class l{constructor(t={}){this.setBaseRoute(t.baseRoute),this.eventManager=new e({shouldCallListener:(e,s)=>{if(!this.matchesBaseRoute(s.type))return!1;let r=e.type,i=this.truncateBaseRoute(s.type);return t.shouldCallListener?t.shouldCallListener.call(this,r,i):r instanceof RegExp?r.test(i):r===i},toHandlerPayload:(e,s)=>{let r=e.type,i=this.truncateBaseRoute(s.type);return t.toHandlerPayload?t.toHandlerPayload.call(this,r,i):{params:r instanceof RegExp&&i.match(r)||[],path:i}}}),c.subscribe(this)}setBaseRoute(e){this.baseRoute=(e||"").replace(/\/$/,"")}matchesBaseRoute(e){const{baseRoute:t}=this;return!t||e===t||e&&["/","?","#"].some((s=>e.startsWith(t+s)))}truncateBaseRoute(e){const{baseRoute:t}=this;return e&&t&&e.startsWith(t)?e.slice(t.length):e}addRouteListener(e,t){return this.eventManager.addEventListener(e,t)}removeRouteListener(e,t){return this.eventManager.removeEventListener(e,t)}dispatchRoute(e){return this.eventManager.dispatchEvent(void 0===e?i():e)}}const h={};var u=async(e,t,s)=>{let r=Object.entries(t),i=`${e}${r.map((([e,t])=>`[${e}="${t}"]`)).join("")}`,n=document.querySelector(i);return n?Promise.resolve(n):h[i]?h[i]:h[i]=new Promise(((t,n)=>{let a=document.createElement(e);a.addEventListener("load",(()=>{delete h[i],t(a)})),a.addEventListener("error",(()=>{delete h[i],n(a)}));for(let[e,t]of r)a.setAttribute(e,t);(s||document.head).appendChild(a)}))},d=async(e,t)=>await u("script",{...t,src:e}),p=async(e,t)=>await u("link",{rel:"stylesheet",...t,href:e});var m=class{constructor(e){this._storage=Object.create(null),this._keys=[],this.setCapacity(e)}setCapacity(e){this.capacity="number"==typeof e?e:1/0,this.revise()}revise(){for(;this._keys.length>Math.max(this.capacity,0);)this.removeItem(this._keys[0])}getItem(e){return this._storage[e]}setItem(e,t){this._keys.push(e),this._storage[e]=t,this.revise()}removeItem(e){let t=this._keys.indexOf(e);-1!==t&&(delete this._storage[e],this._keys.splice(t,1))}clear(){this._storage=Object.create(null),this._keys=[]}key(e){return this._keys[e]}keys(){return this._keys.slice()}length(){return this._keys.length}iterate(e){this._keys.forEach(((t,s)=>e(this._storage[t],t,s)))}};var y=class{constructor(e={}){this.storage=e.storage||new m,this.ns=e.ns?e.ns+".":"",this.version=e.version,this.setCapacity(e.capacity),this.setMaxAge(e.maxAge),this.scheduleRevision()}setCapacity(e){this.capacity="number"==typeof e?e:1/0,this.scheduleRevision()}setMaxAge(e){this.maxAge="number"==typeof e?e:1/0,this.scheduleRevision()}hasValidContent(e){return Boolean(e)&&e.t+this.maxAge>Date.now()&&e.v===this.version}async getItem(e){let t;try{let s=await this.storage.getItem(this.ns+e);t=JSON.parse(s)}catch(e){}if(this.hasValidContent(t))return t.x;t&&this.removeItem(e)}async setItem(e,t,s){let r={x:t,t:Date.now(),v:this.version};await this.storage.setItem(this.ns+e,JSON.stringify(r)),this.scheduleRevision()}async removeItem(e){await this.storage.removeItem(this.ns+e)}async key(e){return await this.storage.key(e)}async clear(){await this.storage.clear()}async keys(){let e,{storage:t,ns:s}=this;if("function"==typeof t.keys)e=await t.keys();else{e=[];let s="function"==typeof t.length?await t.length():t.length;for(let r=0;r<s;r++)e.push(await t.key(r))}return s&&(e=e.filter((e=>e&&e.startsWith(s))).map((e=>e.slice(s.length)))),e}async revise(){let e=await this.keys(),t=e.length-this.capacity;return Promise.all(e.map((async(e,s)=>{s<t?await this.removeItem(e):await this.getItem(e)})))}scheduleRevision(){clearTimeout(this._revisionTimeout),this._revisionTimeout=setTimeout((()=>this.revise()),50)}},f=(e,t)=>{if(!e)return;let s=document.querySelector(`meta[name="${(t?t+".":"")+e}"`);return s?s.content:void 0},g=(e,t)=>{if(!e)return;return(t?[t+e[0].toUpperCase()+e.slice(1),t+e[0].toUpperCase()+e.slice(1).toLowerCase()]:[e,e.toLowerCase()]).map((e=>document.documentElement.dataset[e])).find((e=>void 0!==e))},v=(e={})=>{let{ns:t,props:s,transform:r={}}=e,i=(e,t)=>"function"==typeof r[e]?r[e](t):t,n=Object.create(null);if(Array.isArray(s))for(let e of s){let s=[f(e,t),g(e,t)].find((e=>void 0!==e));void 0!==s&&(n[e]=i(e,s))}else if(t){for(let[e,s]of Object.entries(document.documentElement.dataset)){if(e.startsWith(t)&&e[t.length]&&e[t.length]===e[t.length].toUpperCase()){let r=e.slice(t.length);r&&(r=r[0].toLowerCase()+r.slice(1),n[r]=i(r,s))}}for(let e of document.querySelectorAll(`meta[name^="${t}."]`)){let s=e.name.slice(t.length+1);s&&(n[s]=i(s,e.content))}}return n},w=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},b=/["'&<>]/,L=function(e){var t,s=""+e,r=b.exec(s);if(!r)return s;var i="",n=0,a=0;for(n=r.index;n<s.length;n++){switch(s.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==n&&(i+=s.substring(a,n)),a=n+1,i+=t}return a!==n?i+s.substring(a,n):i};var R=(e,t={})=>{if(!e)return e;if(window.Handlebars)return window.Handlebars.compile(e)(t);for(let[s,r]of Object.entries(t))e=e.replace(new RegExp(`\\$\\{${w(String(s))}\\}`,"g"),L(r));return e};const E=["endpoint","templateContainer","cacheMaxAge","cacheStorage","cacheNamespace","cacheCapacity","version"],C={cacheMaxAge:Number,cacheCapacity:Number,cacheStorage:e=>window[e]};var k=(e={})=>{const{ns:t}=e;return{compile:R,templateContainer:"template",cacheNamespace:t,...v({ns:t,props:E,transform:C}),...e}};async function x(e){let{ok:t,headers:s,status:r,statusText:i}=e,n={status:r,statusText:i,headers:s};if(t)return n.data=await e.text(),n;throw new Error(n)}var S=e=>{const{endpoint:t,templateContainer:s,compile:r,onError:i,cacheMaxAge:n,cacheCapacity:a,cacheStorage:o,cacheNamespace:c,version:l}=k(e);let h,u;return t&&(u=new y({maxAge:n,capacity:a,storage:o,ns:c,version:l}),h=(({baseURL:e})=>({get:async t=>{let s=await fetch(e+t);return await x(s)},post:async(t,s={})=>{let r=await fetch(e+t,{method:"POST",body:JSON.stringify(s.data||{}),headers:{"Content-Type":"application/json"}});return await x(r)}}))({baseURL:t})),async(e,t,n=!1)=>{let a;if(n&&h)try{a=(await h.post(e,{data:t})).data}catch(e){i&&i(e)}else{let n,o=document.querySelector(`${s}[data-element="${e}"]`);if(o)n=o.innerHTML;else if(h&&(n=await u.getItem(e),!n))try{let t=await h.get(e);await u.setItem(e,n=t.data)}catch(e){i&&i(e)}a=r(n,t)}let o=document.createDocumentFragment();if(a){let e=Object.assign(document.createElement("body"),{innerHTML:a});for(;e.childNodes.length;)o.appendChild(e.firstChild)}return o}};S();const A="xjs",M=["baseRoute"];var H=(e,t)=>{const s=e&&e.ns;return{...e,ns:(s?s+".":"")+t}},_=(e,t)=>("string"==typeof t?e.innerHTML=t:(e.innerHTML="",t&&e.appendChild(t)),e);const T=(t={})=>{t=((e={})=>{const{ns:t=A}=e;return{ns:t,...v({ns:t,props:M}),...e}})(t);const i=new e,n=new l({baseRoute:t.baseRoute});return{addEventListener:(e,t)=>i.addEventListener(e,t),addRouteListener:(e,t)=>n.addRouteListener(e,t),config:t,createElement:S(H(t,"element")),dispatchEvent:(e,t)=>i.dispatchEvent(e,t),dispatchRoute:e=>n.dispatchRoute(e),importResource:u,importScript:d,importStyle:p,proxySelector:s,proxySelectorAll:r,removeEventListener:(e,t)=>i.removeEventListener(e,t),removeRouteListener:(e,t)=>n.removeRouteListener(e,t),replaceContent:_,route:c,Router:l}};return{create:T,...T()}}();
